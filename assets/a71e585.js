(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{769:function(e,t,n){"use strict";n.r(t);n(34),n(15);var r=n(4),o={data:function(){return{valid:!0,name:"",wardId:"",beds:[],date:(new Date).toISOString().substr(0,7),menu1:!1,menu2:!1,modal:!1,admission:{bedId:"",serviceId:0,isActive:1,endDateTime:null,startDateTime:null}}},methods:{wardIdChanges:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.wardId),t.next=3,e.$api.$get("beds/".concat(e.wardId,"/ward/")).then((function(t){null!==t&&(e.beds=t.filter((function(e){return!1===e.isOccupied})))})).catch((function(e){console.log(e)}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},validate:function(){var e=this.$refs.form.validate();this.$refs.form.validate(),e&&(this.admission.serviceId=parseInt(this.$route.params.id),this.$store.dispatch("admit_patient",this.admission))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}},created:function(){this.admission.serviceId=this.$route.params.id},beforeCreate:function(){this.$store.dispatch("retrieve_all_wards")},computed:{wards:function(){return this.$store.getters.wards},patient:function(){return this.$store.getters.patient(parseInt(this.$route.params.id))}}},d=n(37),c=n(46),l=n.n(c),m=n(138),v=n(522),f=n(521),_=n(542),h=n(727),k=n(567),w=n(232),x=n(543),$=n(174),D=n(536),I=n(98),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null!=e.patient?n("div",{staticClass:"breadcrumb "},[n("router-link",{attrs:{to:"/"}},[e._v("Dashboard")]),e._v(" "),n("router-link",{attrs:{to:"/patients"}},[e._v("Patients")]),e._v(" "),n("router-link",{attrs:{to:"/patients/"+this.$route.params.id}},[e._v(e._s(e.patient.name))]),e._v(" "),n("a",{staticClass:"active"},[e._v(" Admit")])],1):e._e(),e._v(" "),n("v-card",{staticClass:"pa-3"},[n("v-card-title",[e._v("Patient Admission")]),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",md:"5"}},[n("v-select",{attrs:{items:e.wards,"prepend-icon":"mdi-home-variant-outline",rules:[function(e){return!!e||"Item is required"}],label:"Select ward","item-value":"id",required:""},on:{change:function(t){return e.wardIdChanges()}},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.item;return[e._v("\n                "+e._s(n.name)+" - "+e._s(n.id)+"\n              ")]}},{key:"item",fn:function(t){var n=t.item;return[e._v("\n                "+e._s(n.id)+" - "+e._s(n.name)+"\n              ")]}}]),model:{value:e.wardId,callback:function(t){e.wardId=t},expression:"wardId"}})],1),e._v(" "),n("v-col",{directives:[{name:"show",rawName:"v-show",value:e.beds.length>0,expression:"beds.length > 0"}],attrs:{cols:"12",md:"5"}},[n("v-select",{attrs:{items:e.beds,"prepend-icon":"mdi-queen-bed",rules:[function(e){return!!e||"Item is required"}],"item-value":"id",required:""},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.item;return[e._v("\n                "+e._s(n.identifier)+" - "+e._s(n.id)+"\n              ")]}},{key:"item",fn:function(t){var n=t.item;return[e._v("\n                "+e._s(n.id)+" - "+e._s(n.identifier)+"\n              ")]}}]),model:{value:e.admission.bedId,callback:function(t){e.$set(e.admission,"bedId",t)},expression:"admission.bedId"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"5"}},[n("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Admission from Date","prepend-icon":"mdi-calendar",readonly:"",rules:[function(e){return!!e||"Date is required"}],required:""},model:{value:e.admission.startDateTime,callback:function(t){e.$set(e.admission,"startDateTime",t)},expression:"admission.startDateTime"}},"v-text-field",o,!1),r))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[e._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:"",required:""},on:{input:function(t){e.menu1=!1}},model:{value:e.admission.startDateTime,callback:function(t){e.$set(e.admission,"startDateTime",t)},expression:"admission.startDateTime"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu1=!1}}},[e._v("\n                  Cancel\n                ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu1.save(e.date)}}},[e._v("\n                  OK\n                ")])],1)],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"5"}},[n("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"To Date","prepend-icon":"mdi-calendar",readonly:"",rules:[function(e){return!!e||"Date is required"}],required:""},model:{value:e.admission.endDateTime,callback:function(t){e.$set(e.admission,"endDateTime",t)},expression:"admission.endDateTime"}},"v-text-field",o,!1),r))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[e._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:"",required:""},on:{input:function(t){e.menu2=!1}},model:{value:e.admission.endDateTime,callback:function(t){e.$set(e.admission,"endDateTime",t)},expression:"admission.endDateTime"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v("\n                  Cancel\n                ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.date)}}},[e._v("\n                  OK\n                ")])],1)],1)],1)],1),e._v(" "),n("div",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v("\n            Reset Form\n          ")]),e._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"primary"},on:{click:e.validate}},[e._v("\n            Admit\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VBtn:m.a,VCard:v.a,VCardText:f.c,VCardTitle:f.d,VCol:_.a,VDatePicker:h.a,VForm:k.a,VMenu:w.a,VRow:x.a,VSelect:$.a,VSpacer:D.a,VTextField:I.a})}}]);